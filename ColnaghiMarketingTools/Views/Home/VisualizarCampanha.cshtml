@model ColnaghiMarketingTools.Models.Campanha
@{
    ViewData["Title"] = "Visualização da Campanha";
    Layout = "_Layout";
}

<div style="text-align:right; margin-bottom: 18px;">
    <form asp-action="GerarEmailMarketing" asp-route-id="@Model.Id" method="post" style="display:inline;">
        <button type="submit" class="btn-primary">Gerar E-mail Marketing</button>
    </form>
</div>

<div class="main-content-wrapper">
    <div class="preview-final-container">
        <div class="preview-final-email">
            <div class="preview-logo">
                <img src="~/img/Logo.png" alt="Colnaghi Logo" />
            </div>
            <hr class="preview-divider" />
            <div class="preview-title">
                <h1>@Model.Titulo</h1>
            </div>
            <div class="preview-chamada">
                <p>@Model.Chamada</p>
            </div>
            <div class="preview-cta">
                <button class="btn-cta-vermelho" disabled>Conheça o Lançamento</button>
            </div>
            <div class="preview-corpo">
                <p>@Model.CorpoTexto</p>
            </div>
            <h3 class="unidades-titulo-vermelho">Unidades</h3>

            <div class="preview-unidades">
                <hr class="unidades-divider" />
                <div class="unidades-lista-grid @(Model.TipoExibicao == 1 ? "um-por-linha" : "dois-por-linha")">
                    @if (Model.Imoveis != null && Model.Imoveis.Any())
                    {
                        foreach (var imovel in Model.Imoveis)
                        {
                            <a href="@imovel.UrlLink" target="_blank" style="text-decoration:none; color:inherit;">
                                <div class="unidade-card-figma">
                                    <div class="unidade-foto-container">
                                        @if (!string.IsNullOrEmpty(imovel.FotoDestaquePequena))
                                        {
                                            <img src="@imovel.FotoDestaquePequena" alt="Foto Imóvel" class="unidade-foto-figma" />
                                        }
                                        <div class="unidade-codigo-sobre-imagem">@imovel.CodigoImovel</div>
                                        @if (!string.IsNullOrEmpty(imovel.Promocao))
                                        {
                                            <div class="unidade-promocao-sobre-imagem">@imovel.Promocao</div>
                                        }
                                    </div>
                                    <div class="unidade-bairro-tipo-figma">
                                        @{
                                            var tipo = !string.IsNullOrEmpty(imovel.Tipo) ? char.ToUpper(imovel.Tipo[0]) + imovel.Tipo.Substring(1).ToLower() : "";
                                            var bairro = !string.IsNullOrEmpty(imovel.Bairro) ? char.ToUpper(imovel.Bairro[0]) + imovel.Bairro.Substring(1).ToLower() : "";
                                            var bairroTipo = $"{tipo} no {bairro}";
                                        }
                                        @bairroTipo
                                    </div>
                                    <div class="unidade-detalhes-valor-container">
                                        <div class="unidade-detalhes-figma">
                                            <span><img src="~/img/icone_tamanho.jpg" /> @imovel.AreaPrivativa m²</span>
                                            <span class="detalhe-sep">|</span>
                                            <span><img src="~/img/icone_carro.jpg" /> @imovel.Vagas</span>
                                            <span class="detalhe-sep">|</span>
                                            <span><img src="~/img/icone_dormitorio.jpg" /> @imovel.Dormitorios</span>
                                        </div>
                                        <div class="unidade-valor-figma">@(imovel.ValorVenda.HasValue ? ((int)imovel.ValorVenda.Value).ToString("C0") : "")</div>
                                    </div>
                                </div>
                            </a>
                        }
                    }
                    else
                    {
                        <div class="unidades-placeholder">Nenhum imóvel cadastrado.</div>
                    }
                </div>
            </div>
            <div class="preview-rodape">
                <p>@Model.Rodape</p>
            </div>
        </div>
    </div>
</div> 